---
# tasks file for containers
- name: Create Ubuntu Base Containers
  vars:
    ubuntu_versions:
      - {
        version_name: bionic,
        version_number: 18.04,
      }
      - {
        version_name: focal,
        version_number: 20.04,
      }
      - {
          version_name: jammy,
          version_number: 22.04,
      }
      - {
        version_name: noble,
        version_number: 24.04,
      }
  include_tasks:
    file: ubuntu.yaml
  loop: "{{ ubuntu_versions }}"
  tags:
    - never
    - base

- name: Create RStudio Containers
  vars:
    rstudio_versions:
      - {
        base_container_name: ubuntu-bionic-compile,
        base_container_version_name: bionic,
        r_version: 4.0.0,
        rstudio_version: 1.2.5042,  # 1.3.959,
      }
      - {
        base_container_name: ubuntu-bionic-compile,
        base_container_version_name: bionic,
        r_version: 4.0.4,
        rstudio_version: 1.2.5042,  # 1.3.959,
      }
      - {
        base_container_name: ubuntu-bionic-compile,
        base_container_version_name: bionic,
        r_version: 4.2.0,
        rstudio_version: 1.2.5042,  # 1.3.959,
      }
      - {
        base_container_name: ubuntu-focal-compile,
        base_container_version_name: focal,
        r_version: 4.2.1,
        rstudio_version: 1.2.5042,  # 1.3.959,
      }
      - {
        base_container_name: ubuntu-focal-compile,
        base_container_version_name: focal,
        r_version: 4.2.2,
        rstudio_version: 1.2.5042,  # 1.3.959,
      }
      - {
        base_container_name: ubuntu-focal-compile,
        base_container_version_name: focal,
        r_version: 4.2.2,
        rstudio_version: 2022.12.0-353,  # 1.3.959,
      }
      - {
        base_container_name: ubuntu-focal-compile,
        base_container_version_name: focal,
        r_version: 4.3.1,
        rstudio_version: 2023.06.1-524,  # 1.3.959,
      }
      - {
        base_container_name: ubuntu-focal-compile,
        base_container_version_name: focal,
        r_version: 4.3.2,
        rstudio_version: 2023.06.1-524,  # 1.3.959,
      }
      - {
        base_container_name: ubuntu-focal-compile,
        base_container_version_name: focal,
        r_version: 4.3.3,
        rstudio_version: 2023.06.1-524,  # 1.3.959,
      }
      - {
        base_container_name: ubuntu-jammy-compile,
        base_container_version_name: jammy,
        r_version: 4.4.1,
        rstudio_version: 2023.06.1-524,  # 1.3.959,
      }
      - {
        base_container_name: ubuntu-jammy-compile,
        base_container_version_name: jammy,
        r_version: 4.5.1,
        rstudio_version: 2025.05.1-513,  # 1.3.959,
      }
  include_tasks:
    file: RStudio.yaml
  loop: "{{ rstudio_versions }}"
  tags:
    - never
    - RStudio

- name: Create gnuplot container
  include_tasks:
    file: gnuplot.yaml
  tags:
    - never
    - gnuplot

- name: Create Python ML Base Containers
  vars:
    python_ml_base_versions:
      - {
        base_container_name: ubuntu-jammy-compile,
        base_container_version_name: jammy,
        version_number: "0.0.1",
        cuda_version: "11.8",
        cudnn_version: "8.6.0",
        cuda_toolkit_package: "cuda-toolkit-11-8",
        cuda_keyring_url: "https://developer.download.nvidia.com/compute/cuda/repos/ubuntu2204/x86_64/cuda-keyring_1.0-1_all.deb",
        cuda_keyring_file: "cuda-keyring_1.0-1_all.deb",
      }
      - {
        base_container_name: ubuntu-noble-compile,
        base_container_version_name: noble,
        version_number: "0.0.2",
        cuda_version: "12.8.1",
        cudnn_version: "9.8.0",
        cudnn_deb_file: "cudnn-local-repo-ubuntu2404-9.8.0_1.0-1_amd64.deb",
        cuda_toolkit_package: "cuda-toolkit-12-8",
        cuda_keyring_url: "https://developer.download.nvidia.com/compute/cuda/repos/ubuntu2404/x86_64/cuda-keyring_1.1-1_all.deb",
        cuda_keyring_file: "cuda-keyring_1.1-1_all.deb",
      }
  include_tasks:
    file: python-ml-base.yaml
  loop: "{{ python_ml_base_versions }}"
  tags:
    - never
    - python-ml-base

- name: Create Python ML Containers
  vars:
    python_ml_versions:
      - {
        base_version: "0.0.1",
        version_number: "0.0.1",
        python_version: "3.10",
        tensorflow_version: "2.12.0",
        opencv_version: "4.5.5.64",
        numpy_version: "1.23.5",
        pandas_version: "2.1.4",
        matplotlib_version: "3.8.0",
        seaborn_version: "0.13.0",
        pillow_version: "10.1.0",
        sklearn_version: "1.3.2",
        requests_version: "2.31.0",
        torch_version: "2.5.1",
        torchvision_version: "0.20.1",
        torchaudio_version: "2.5.1",
        jax_version: "0.4.35",
        flax_version: "0.10.2",
        transformers_version: "4.47.1",
        sentence_transformers_version: "3.3.1",
        langchain_version: "0.3.15",
        spacy_version: "3.8.3",
        optuna_version: "4.1.0",
        wandb_version: "0.19.1",
        plotly_version: "5.24.1",
        streamlit_version: "1.41.1",
        ipympl_version: "0.9.7",
        jupyterlab_version: "4.4.6",
        jupyter_ai_version: "2.31.6",
        pytorch_cuda_version: "cu118"
      }
      - {
        base_version: "0.0.2",
        version_number: "0.0.2",
        python_version: "3.12",
        tensorflow_version: "2.19.1",
        opencv_version: "4.12.0.88",
        numpy_version: "2.1.3",
        pandas_version: "2.2.3",
        matplotlib_version: "3.10.5",
        seaborn_version: "0.13.2",
        pillow_version: "11.3.0",
        sklearn_version: "1.6.1",
        requests_version: "2.32.5",
        torch_version: "2.6.0",
        torchvision_version: "0.21.0",
        torchaudio_version: "2.6.0",
        jax_version: "0.7.1",
        flax_version: "0.11.1",
        transformers_version: "4.55.4",
        sentence_transformers_version: "5.1.0",
        langchain_version: "0.3.27",
        spacy_version: "3.8.7",
        optuna_version: "4.5.0",
        wandb_version: "0.21.1",
        plotly_version: "6.3.0",
        streamlit_version: "1.48.1",
        ipympl_version: "0.9.7",
        jupyterlab_version: "4.4.6",
        jupyter_ai_version: "2.31.6",
        pytorch_cuda_version: "cu124"
      }
      - {
        base_version: "0.0.2",
        version_number: "ce",
        python_version: "3.12",
        tensorflow_version: "*",
        opencv_version: "*",
        numpy_version: "*",
        pandas_version: "*",
        matplotlib_version: "*",
        seaborn_version: "*",
        pillow_version: "*",
        sklearn_version: "*",
        requests_version: "*",
        torch_version: "*",
        torchvision_version: "*",
        torchaudio_version: "*",
        jax_version: "*",
        flax_version: "*",
        transformers_version: "*",
        sentence_transformers_version: "*",
        langchain_version: "*",
        spacy_version: "*",
        optuna_version: "*",
        wandb_version: "*",
        plotly_version: "*",
        streamlit_version: "*",
        ipympl_version: "*",
        jupyterlab_version: "*",
        jupyter_ai_version: "*",
        pytorch_cuda_version: "cu124"
      }
  include_tasks:
    file: python-ml.yaml
  loop: "{{ python_ml_versions }}"
  tags:
    - never
    - python-ml
